<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>iGEM Wiki</title>
  <link rel="stylesheet" href="css/styles_main.css"/>
</head>

<body>
  <!-- Scroll progress bar -->
  <div id="progress-bar"></div>

  <!-- Navbar -->
  <nav class="navbar-1">
    <div class="container">
      <!-- Logo -->
      <div class="navbar-brand">
        <img src="images/igemlogo.png" alt="Site Logo"/>
      </div>

      <!-- Main Nav -->
      <ul class="nav-menu">
        <li>
          <a href="#">Wet Lab</a>
          <nav class="navbar-2">
            <div class="container">
              <ul class="nav-menu_hovered">
                <li><a href="#">Plasmid</a></li>
                <li><a href="#">Gene</a></li>
                <li><a href="#">Protein</a></li>
                <li><a href="#">Putida</a></li>
                <li><a href="#">Biofilm</a></li>
                <li><a href="#">Other</a></li>
              </ul>
            </div>
          </nav>
        </li>

        <li>
          <a href="#">Dry Lab</a>
          <nav class="navbar-2">
            <div class="container">
              <ul class="nav-menu_hovered">
                <li><a href="#">ML</a></li>
                <li><a href="#">FBA</a></li>
                <li><a href="#">Wiki</a></li>
                <li><a href="#">Genetic Circuits</a></li>
                <li><a href="#">GEM</a></li>
                <li><a href="#">Other</a></li>
              </ul>
            </div>
          </nav>
        </li>

        <li>
          <a href="#">HP</a>
          <nav class="navbar-2">
            <div class="container">
              <ul class="nav-menu_hovered">
                <li><a href="#">Legal</a></li>
                <li><a href="#">Sponsorship</a></li>
                <li><a href="#">Stuff</a></li>
                <li><a href="#">Other</a></li>
              </ul>
            </div>
          </nav>
        </li>

        <li>
          <a href="#">Prizes</a>
          <nav class="navbar-2">
            <div class="container">
              <ul class="nav-menu_hovered">
                <li><a href="#">Prize-1</a></li>
                <li><a href="#">Prize-2</a></li>
              </ul>
            </div>
          </nav>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Hero -->
  <header class="hero-fullscreen">
    <div class="hero-overlay">
      <div class="hero-text">
        <h1 class="fade-in-up">
          Combatting nitrate<br/>
          leaching in soil<br/>
          with engineered <em>Pseudomonas putida</em>
        </h1>
        <p class="fade-in-up delay-1">Groundwater safety through synthetic biology</p>
      </div>
      <div class="bacteria-mask">
        <img src="images/bacteria.gif" alt="Bacteria" class="bacteria-image"/>
      </div>
    </div>
  </header>

  <!-- Collage Section -->
  <section class="collage-section">
    <div class="container">
      <h2>Our Research Highlights</h2>
      <div class="collage-grid">
        <div class="collage-item">
          <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Pseudomonas_aeruginosa_01.jpg/640px-Pseudomonas_aeruginosa_01.jpg" alt="Pseudomonas"/>
          <p>Engineered <em>Pseudomonas</em> strains optimized for nitrate reduction.</p>
        </div>
        <div class="collage-item">
          <img src="https://upload.wikimedia.org/wikipedia/commons/6/64/Nitrogen_Cycle.svg" alt="Nitrogen Cycle Diagram"/>
          <p>Targeting nitrate hotspots in agricultural soils to restore balance.</p>
        </div>
        <div class="collage-item">
          <img src="https://upload.wikimedia.org/wikipedia/commons/1/17/Biofilm_on_catheter.jpg" alt="Biofilm on catheter"/>
          <p>Investigating biofilm formation for enhanced microbial resilience.</p>
        </div>
      </div>
    </div>
  </section>

  <script>
    // --- Scroll progress bar ---
    window.addEventListener("scroll", () => {
      const docHeight = Math.max(document.body.scrollHeight, document.documentElement.scrollHeight) - window.innerHeight;
      const scrolled = docHeight > 0 ? (window.scrollY / docHeight) * 100 : 0;
      document.getElementById("progress-bar").style.width = scrolled + "%";
    });

    // --- Smoother bacteria mask with rAF throttling + hover radius change ---
    (function () {
      const overlay = document.querySelector(".hero-overlay");
      const mask = document.querySelector(".bacteria-mask");
      let frameRequested = false;
      let target = { x: 0.5, y: 0.5 };

      function updateMask() {
        mask.style.setProperty("--x", (target.x * 100) + "%");
        mask.style.setProperty("--y", (target.y * 100) + "%");
        frameRequested = false;
      }

      overlay.addEventListener("mousemove", (e) => {
        const rect = overlay.getBoundingClientRect();
        target.x = (e.clientX - rect.left) / rect.width;
        target.y = (e.clientY - rect.top) / rect.height;
        if (!frameRequested) {
          frameRequested = true;
          requestAnimationFrame(updateMask);
        }
      });

      overlay.addEventListener("mouseenter", () => {
        mask.style.setProperty("--r", "130px");
      });
      overlay.addEventListener("mouseleave", () => {
        target = { x: 0.5, y: 0.5 };
        mask.style.setProperty("--r", "100px");
        updateMask();
      });

      // initialize center
      updateMask();
    })();
  </script>
</body>
</html>
